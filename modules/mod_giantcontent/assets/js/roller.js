(function(){var t=function(t,i){return function(){return t.apply(i,arguments)}};this.roller=function(){function i(i){this.options=null!=i?i:{},this.rotateRight=t(this.rotateRight,this),this.rotateLeft=t(this.rotateLeft,this),this.moveRight=t(this.moveRight,this),this.moveLeft=t(this.moveLeft,this),this.clearScroll=t(this.clearScroll,this),this.configureScroll=t(this.configureScroll,this),this.configureWidths=t(this.configureWidths,this),this.configureLoad=t(this.configureLoad,this),this.configureHover=t(this.configureHover,this),this.options.items&&(this.div=jQuery(this.options.items),this.div.length&&this.configure())}return i.prototype.configure=function(){var t,i=this;return this.children=this.div.children(),this.children.wrapAll('<div class="gts-roller-inner"></div>'),this.children.wrapAll('<div class="gts-roller-shuttle"></div>'),this.wrapper=this.div.find(".gts-roller-inner").wrap('<div class="gts-roller-outer"></div>'),this.shuttle=this.div.find(".gts-roller-shuttle"),this.rotation=[],this.shuttle.width(this.options.shuttleWidth?parseInt(this.options.shuttleWidth,10):1e4),this.options.startHeight&&this.wrapper.height(parseInt(this.options.startHeight,10)),this.options.verticalCenter&&this.shuttle.addClass("vertical-center"),this.options.navigation?(this.div.find(".gts-roller-outer").append('<div class="gts-roller-navigation"><a class="gts-roller-prev" href="#"></a><a class="gts-roller-next" href="#"></a></div>'),this.prev=this.div.find(".gts-roller-prev"),this.next=this.div.find(".gts-roller-next")):(this.prev=jQuery(this.options.prev),this.next=jQuery(this.options.next)),this.prev.click(function(){return i.moveRight()}),this.next.click(function(){return i.moveLeft()}),0!==this.options.pagination&&(this.pager=jQuery('<div class="gts-roller-pagination">'),this.div.append(this.pager),this.children.each(function(t){var e;return e=jQuery("<a href='#'><span>"+(t+1)+"</span></a>"),i.pager.append(e),e.click(function(){return i.index=t,i.moveToIndex(i.index,"best",!0),!1})})),this.pager_links=this.div.find(".gts-roller-pagination a"),this.mouse_catcher=jQuery('<div style="position:absolute; top:0; left: 0; height: 100%; width: 100%;" class="gts-roller-mouse-catcher"></div>'),this.mouse_catcher.appendTo(this.wrapper).mousemove(function(){return i.clearScroll(),i.mouse_catcher.remove()}),t=null,this.children.each(function(t,e){var r;return r=jQuery(e),r.attr("data-roller-id",t),r.addClass("gts-roller-item"),i.rotation.push(e)}),this.index=this.options.startIndex||0,this.interval=this.options.interval||4e3,this.duration=this.options.duration||this.interval/4,this.options.resize!==!1&&jQuery(window).resize(function(){return i.resize()}),this.options.configure_load?this.configureLoad():jQuery(window).load(this.configureLoad),this.div.trigger(jQuery.Event("gts-roller:dom_ready")),this},i.prototype.bestDirection=function(t,i){return i||(i=jQuery.inArray(t,this.rotation)),i<this.children.length/2?"right":"left"},i.prototype.configureHover=function(){return this.div.hover(this.clearScroll,this.configureScroll),this.options.navigation?(this.prev.hover(this.clearScroll,this.configureScroll),this.next.hover(this.clearScroll,this.configureScroll)):void 0},i.prototype.configureLoad=function(){return this.configureWidths(),this.moveToIndex(this.index,"right",!0),0!==this.options.autoPlay?(this.configureScroll(),this.configureHover()):void 0},i.prototype.configureWidths=function(){var t,i=this;return this.div.trigger(jQuery.Event("gts-roller:before_loaded")),this.width=t=0,this.wrapper.css({height:"","min-height":0}),this.shuttle.width("").removeClass("gts-roller-shuttle"),this.children.width(""),this.children.each(function(e,r){var s,h,o;return s=jQuery(r),o=s.outerWidth(!0),s.width(o),i.width+=o,i.options.height||(h=s.outerHeight(!0),h>t&&(t=h)),r}),this.options.height?this.wrapper.height(this.options.height):(this.wrapper.height(""),this.wrapper.css("min-height",t)),this.real_width=this.width,this.shuttle.width(2*this.real_width).addClass("gts-roller-shuttle"),this},i.prototype.configureScroll=function(){var t=this;return 1!==this.scrolled&&(this.timer=setInterval(function(){return t.moveLeft()},this.interval),this.scrolled=1),this},i.prototype.clearScroll=function(){return 0!==this.scrolled&&(clearInterval(this.timer),this.scrolled=0),this},i.prototype.marginLeft=function(t,i){var e,r,s,h,o,n;for(null==i&&(i=0),s=0,n=this.rotation,r=h=0,o=n.length;o>h;r=++h)e=n[r],t>r&&r>=i&&(s+=jQuery(e).outerWidth(!0));return s},i.prototype.marginRight=function(t,i){var e,r,s,h,o,n;for(null==i&&(i=0),i=this.rotation.length-i-1,s=0,n=this.rotation,r=h=0,o=n.length;o>h;r=++h)e=n[r],r>t&&i>=r&&(s+=jQuery(e).outerWidth(!0));return s},i.prototype.moveLeft=function(){return this.index=(this.index+1)%this.children.length,this.moveToIndex(this.index,"left",!0),!1},i.prototype.moveRight=function(){return this.index-=1,this.index<0&&(this.index=this.children.length-1),this.moveToIndex(this.index,"right",!0),!1},i.prototype.moveToChild=function(t){var i;return i=jQuery.inArray(jQuery(t)[0],this.children),i>-1?this.moveToIndex(i):void 0},i.prototype.moveToIndex=function(t,i,e){var r,s,h,o,n,l,a=this;if(null==e&&(e=!0),this.index=t,this.clearScroll(),r=this.children[t],o=jQuery.inArray(r,this.rotation),i&&"best"!==i||(i=this.bestDirection(r,o)),this.children.removeClass("active"),jQuery(r).addClass("active").trigger(jQuery.Event("gts-roller:activate")),this.pager_links.removeClass("active"),jQuery(this.pager_links[t]).addClass("active"),l=this.wrapper.width(),l<this.real_width){if(n=(l-jQuery(r).outerWidth(!0))/2,"right"===i)for(;0===o||this.marginLeft(o)<n;)this.rotateRight(),o=jQuery.inArray(r,this.rotation);else for(;o===this.children.length-1||this.marginRight(o)<n;)this.rotateLeft(),o=jQuery.inArray(r,this.rotation);h=-1*(this.marginLeft(o)-n),e?(s="moving-"+i,this.shuttle.addClass(s),this.div.trigger(jQuery.Event("gts-roller:moving")),this.shuttle.stop().animate({left:h},this.duration,this.options.easing,function(){return a.shuttle.removeClass(s),a.div.trigger(jQuery.Event("gts-roller:moved"))})):(this.shuttle.css("left",h),this.div.trigger(jQuery.Event("gts-roller:moved")))}else this.shuttle.css("left",(l-this.width)/2);return 0!==this.options.autoPlay&&this.configureScroll(),this},i.prototype.resize=function(){var t=this;return this.clearScroll(),clearTimeout(this.resize_timer),this.resize_timer=setTimeout(function(){return 0!==t.options.autoPlay&&t.configureScroll(),t.configureWidths(),t.moveToIndex(t.index,"left"),t.div.trigger(jQuery.Event("gts-roller:resized"))},200),this},i.prototype.rotateLeft=function(){var t,i,e;return t=this.shuttle.css("left"),e=t?parseInt(t,10):0,i=this.rotation.shift(),this.rotation.push(i),this.shuttle.css("left",e+jQuery(i).outerWidth(!0)),this.shuttle.append(this.shuttle.children().first().detach())},i.prototype.rotateRight=function(){var t,i,e;return t=this.shuttle.css("left"),e=t?parseInt(t,10):0,i=this.rotation.pop(),this.rotation.unshift(i),this.shuttle.css("left",e-jQuery(i).outerWidth(!0)),this.shuttle.prepend(this.shuttle.children().last().detach())},i}()}).call(this);